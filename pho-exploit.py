import os
from termcolor import colored
import subprocess



def options_control():
    os.system('cls')
    print(colored('''\t================================================
    \t==== [1] Display-Screen  [2] Record-Screen  ====
    \t==== [3] Take-Screenshot  [4] Hack-Phone    ====
    \t====\t    [%-10s]\t    ====
    \t================================================'''%(colored('ultra Cyber Security','yellow')),'blue'))
def add_devices_wifi(ip_addr):
    # check if device is connected via usb
    pro_1 = subprocess.getoutput('adb devices')
    if len(str(pro_1)) == 25:
        print(colored('\t[ 1st Connect device via USB ]','red'))
    else:
        print(colored('\t[ Devices connected via USB ]','green'))
        print(('%s Injecting shell code please wait...' % colored('[+]','blue')))
        pro_2 = subprocess.getoutput('adb tcpip 5555')
        print(str('%s '+pro_2) % colored('[+]','blue'))
        command = 'adb connect %s:5555' % ip_addr
        pro_4 = subprocess.getoutput(command)
        print(str('%s '+pro_4) % colored('[+]','blue'))
        input(colored('\t[ Done : - Unplug USB-cable and press <Enter> ]','green'))


# mean function 
def exploit():
    while True:
        options_control()
        opt = int(input(colored('select-Option: ','red')))
        if opt == 1:
            subprocess.run('scrcpy --always-on-top -w',shell=False)
        elif opt == 2:
            time = str(input(colored('setTime-limite[in sec]: ','red')))
            command2 = 'adb shell screenrecord --time-limit %s /mnt/sdcard/Download/test.mp4' % time
            subprocess.run(command2,shell=False)
            subprocess.run('adb pull /mnt/sdcard/Download/test.mp4',shell=False)
            subprocess.run('adb shell rm /mnt/sdcard/Download/test.mp4')
            input(colored('\t\t[ Screen-Record Done test.mp4 ]','green'))
            #subprocess.run('adb exec-out screenrecord  --time-limit 20 > test.mp4',shell=False)
        elif opt == 3:
            os.system('adb exec-out screencap -p > screen.png')
            input(colored('\t\t[ Screenshot Done screen.png ]','green'))
        elif opt == 4:
            ip_addr = str(input(colored('target-Ip-addr: ','red')))
            add_devices_wifi(ip_addr)
            
            
        
exploit()
